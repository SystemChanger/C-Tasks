#include <stdio.h>
#include <conio.h>
#include <math.h>


void main()
{
	int numberOfDigits=1;
	long double numberToDivide;
	long double m = 0, n = 1;

	printf("Enter number to maximize: "); scanf_s("%lf", &numberToDivide);

	while (numberToDivide >= 10) 
	{
		numberToDivide = numberToDivide / 10.;
		numberOfDigits++;
	
	
	}



	float *Array = new float[numberOfDigits];
	for (int numberOfCell = 0; numberOfCell < numberOfDigits; numberOfCell++)
	{
	
		printf("m = %f\n", m);
		printf("Number to divide = %f\n", numberToDivide);

		Array[numberOfCell] = floor(numberToDivide - m);                               /*К примеру "123456", На последнем этапе выдаёт "5", вместо "6". 123456.000000 - 123450.000000 = 5? Почему так?*/



		m = floor (numberToDivide)*10;
		numberToDivide=numberToDivide*10;

		printf("%f\n", Array[numberOfCell]);



	
	}



	for (int numberOfCell = 0; numberOfCell < numberOfDigits; numberOfCell++) printf("Array[%d]=%.0f\n", numberOfCell, Array[numberOfCell]);



	int numberOfDigitMoves;
	printf("Enter number of digit moves: ");
	scanf_s("%d", &numberOfDigitMoves);



	int numberOfRepeats = 0, 
		numberOfRemainingDigitMoves = numberOfDigitMoves, 
		seenCell = -1, numberOfShifts = 0, maxValueCell = 0, 
		leftCell = 0, rightCell = leftCell + 1,
		valueOfTheLeftCell = 0, valueOfTheRightCell = 0, 
		numberOfDoneDigitMoves = 0;


	

	for (; numberOfDoneDigitMoves < numberOfDigitMoves; )
	{

		int maxNumber = 0;


		for (int numberOfCell = seenCell+1; numberOfCell <= numberOfRemainingDigitMoves; numberOfCell++)
		{
							if (numberOfCell >= numberOfDigits) break;

			if (maxNumber < Array[numberOfCell])
			{

				maxNumber = Array[numberOfCell];
				numberOfShifts = numberOfCell;



			}
		}



		leftCell = numberOfShifts - 1, rightCell = leftCell + 1;

		while (Array[maxValueCell] != maxNumber)
		{
			valueOfTheLeftCell = Array[rightCell];
			valueOfTheRightCell = Array[leftCell];
			Array[leftCell] = valueOfTheLeftCell;
			Array[rightCell] = valueOfTheRightCell;
			numberOfDoneDigitMoves++;
			leftCell--; rightCell--;
		}


		for (int numberOfCell = 0; numberOfCell < numberOfDigits; numberOfCell++) printf("Array[%d]=%.0f\n", numberOfCell, Array[numberOfCell]);

		if (numberOfDoneDigitMoves = numberOfDoneDigitMoves) numberOfRepeats++;
		if (numberOfRepeats>5) break;





		maxValueCell++, seenCell++,
		numberOfRemainingDigitMoves = numberOfDigitMoves - numberOfDoneDigitMoves + 1;

	}






	for (int numberOfCell = 0; numberOfCell < numberOfDigits; numberOfCell++) printf("Array[%d]=%.0f\n", numberOfCell, Array[numberOfCell]);





	_getch();
	
	delete[] Array;
}
